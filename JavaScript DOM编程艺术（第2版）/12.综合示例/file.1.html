第12章 综合示例


12.1 项目简介

12.1.1  原始资料

12.1.2 站点结构

创建三个文件夹：1. images,保存要用的图片  2.styles,用来保存css文件   3. scripts,用来保存javascript文件

收到页面，首先得有一个详细介绍乐队背景信息的页面，其次要哟一个类似相册的放照片的页面。

创建5个页面
1.Home  2.  About  3. Photos  4. Live   5.  Contact


5个页面对于html文件

1.index.html 2.about.html 3. photos.html  4.live.html 5. contact.html


12.1.3 页面结构

站点的每个页面都要分成几个区域


<!--1.头部区域包含站点的品牌性信息，也就是放logo的地方。这个区域要使用<header>元素-->
<!--2. 导航区域中包含一组链接，指向各个页面。这个区域使用<nav>元素-->
<!--3. 内容与其包含每一页的实质性内容，这个与其使用<article>元素-->


12.2 设计

12.3 css

怎样组件css，可以用其中一个保存与整体布局有关的样式，用另一个作为专门的颜色样式表，而用第三个来保存与板式有关的样式

1. layout.css  ————————>整体布局
2. color.css  ————————>颜色样式
3. typography.css  ————————>板式


这样样式表都可以导入到一个基本的样式表中

@import url(layout.css);
@import url(color.css);
@import url(typography.css);

把包含这三行代码的文件保存为basic.css，并放在styles文件夹中。如果你想添加一个新样式表或删除一个样式，只要编辑basic.css即可

<!--可以在模板的<head>元素中通过<link>元素引入这个基本样式表。然后，再在页面<header>中添加一个<img>标签，指向logo图片。此时-->
<!--也可以向<article>中添加一些临时性填充文本-->

12.3.1 颜色
12.3.2 布局
为了让导航中的链接水平排列，需要应用一些浮动效果

12.3.3 板式

字体和大小很显然放在typography.css  把内边距信息放在了layout.css，而外边距信息则放在typography.css中

12.4  标记

模板做完了，样式也都写完了，接下来要考虑站点的每个页面了
这段文字哦有一个id，叫"intro".我们要利用利用这个id为这段介绍添加特殊的样式。此外，还可以利用这个id来添加一些DOM脚本

12.5 javascript

在编写DOM脚本之前，必须先确定怎么组织javascript文件。如果站点需要很长的脚本，那最好把它分割成几个小文件。这里只把脚本都放在一个global.js的文件里。
先在script文件夹中创建global.js。然后在其中添加几个整个站点都会用到的函数。
首先要用到addLoadEvent函数，因为在文档完全加载后如何想运行某个函数，就要用到它

12.5.1 页面突出显示

<!--每当我们基于模板页面创建一个新页面时，都要想<article>元素中插入标记。对你要设计的站点而言，这一部分正是每个页面之间不同的地方-->
<!--理想情况下，还应该更新每个页面<nav>元素中的链接，比如，如果当前页面是index.html,那么导航里面就没有必要添加指向当前index.html页面的链接了。-->
但是在实际的网站开发中，不太可能一页一页地编辑导航链接。更常见的做法是通过服务器段包含技术，把包含导航标记的片段插入到每个页面中。这里我们就
假设服务器段会包含下列代码块

服务器段包含可以使用Apache Server Side Include(SSIs),PHP,ASP,或其他服务器段语言

服务器端包含的优点是可以把重用标记快集中保存。这样，等到以后要更新页面头部或导航链接时，只要修改一个文件即可。但是集中保存的去诶单是
不能在每个页面自定义这个代码块。 无论如何，至少当前页面的导航链接还是应该突出显示的。通过突出显示，访客就能知道自己"现在在这里"

修改color.css文件，添加为here类定义的样式：

为了应用刚刚定义的颜色样式，为指向当前页面的导航链接添加here类。

如果使用服务器端包含的话，要做到这一点可就很不容易了。一般来说，服务器技术应该为每个页面创建正确的标记。但是实际情况却并非始终如此

javascript这个时候就能派上用场

在这个例子中。javascript是最后一招了了。如果能在标记中直接添加here类，最好，但是如果控制不了标记，就只好求诸javascript

首先，删除已经添加到导航链接中的所有class属性。然后，编写一个hightlightPage函数，完成以下操作

1. 取得导航列表中所有链接
2.循环遍历这些链接
3. 如果发现了与当前url匹配的链接，为它添加here类
同往常一样，现在函数中添加检查要使用的DOM方法的代码。此外，还要检查各种元素是否存在

通过给每个页面的body元素添加id属性，可以为每个页面应用不同的样式。为了给每个页面添加独特的id属性，可以取得并使用当前链接(即添加here类的链接)中的文本


12.5.2  javascript 幻灯片

主页需要美化一下-

现在应该创建幻灯片元素并准备相应链接。我们把幻灯片直接放在文档中的"intro"段落houm


12.5.3 内部导航

<!--站点的下一页是About页面。在about.html的<article>元素中添加如下-->

<!--<nav>元素中包含内部链接就是为了解决页面过长的问题。单机<nav>中的每个链接，都会跳到带有相应id属性的<section>-->
而使用javascript和DOM，还可以选择性地每次只显示其中一部分(section).showsection函数可以根据指定的id显示相应的section元素
showsection函数的用途是修改每个部分的的display样式属性。除了与作为参数传入的id对应的部分，其他部分的display属性都将被设置为"none"
而传入id对应的那个部分的display属性则被设置为"block"
还需要在article元素中的nav所包含的链接被单击时调用showsection函数
prepareInternalnav的函数，先从循环遍历article中的nav所包含的链接开始
每个链接的href属性中都包含对应部分的id，开头的"#"表示内部链接。要提取每一部分的id值，可以使用split方法。这是根据分隔符把一个字符串分成
两个或多个部分便捷方式

页面越长，这个功能的效果就越明显。例如，要有一个常见的问题页面，那么每个问题都可以作为内部链接来处理。而单击一个问题，就会显示与该问题
对应的答案，与此同时其他问题的答案并不显示

12.5.4  javascript图片库

客户提供了4张照片，在images文件夹里创建一个名为photo的文件夹， 创建一个组链接，指向全尺寸照片，为这个列表指定id为"imagegalery".
在每个链接中添加一个img标签，各个标签的src属性分别指向不同的缩略图

12.5.5   增强表格

客户我们提供日期，每场演出，都要表格数据

在layout.css中为表格中的单元格应用一些样式
更新color.css，为表头和表格选定指定颜色


12.5.6 增强表单

联系表单和其他任何类型的表单一样，都需要某种服务器端技术来进一步验证并保证数据保存到后台数据库或骑行中。之列不会涉及服务器段脚本。而是
会创建一个html页面，向访客显示感谢信息。真实网站就要有服务器脚本来处理用户提交的护甲，把它们保存到数据库中，或通过

1.字段标签

<!--表单有三个字段：name,email,message.米格字段都有一个对应的<label>标签-->
2. 占位符值

使用javascript可以保证字段中始终可以显示提示信息。不过，这一次我们不再使用DOM核心的方法和属性，而是要使用HTML DOM最常用的一个对象：form duix

html文档中每个元素都是一个对象。每个元素都有nodeName,nodeType之类的DOM属性

而有些的元素具有的属性比DOM核心中定义的还要多。文档中的每个表单元素都是一个form对象，每个form对象都有一个elements.length属性。这个
属性返回表单中把汗的表单元素的个数

form.elements.length

这个返回值与childNodes.length不一样，后者返回的是元素中包含的所有节点的个数。而form对象的elements.length属性只关注那些属于表单元素的元素，如input,
textarea,等

相应地，表单中的所有字段都保存在form对象的elements属性中。页面就是一个包含所有表单元素的数组：  form.elements

同样，这个属性与childNodes属性也不一样，后者是一个数组。childNodes数组返回的是所有节点，而elements数组则只返回input,select,textarea以及其他表单字段
elements数组中的每个表单元素都有自己的一组属性。比如，value属性中保存的就是表单元素的当前值:
element.value  等价于 element.getAttribute("value")

resetFields函数中用到了两个事件处理函数。其中，onfocus事件会在用户通过按Tab键或点击表单字段时被触发，而onblur事件会在用户把焦点移出
表单字段时触发。另外，在onblur事件定义之后，立即调用了它，以便在必要时应用占位符值

把resetField函数传入form对象来调用它。再编辑一个函数prepareForms，循环遍历文档中的所有form对象，并将每个form对象传给resetFields函数

3.表单验证

html5提供了required属性，用于表示某个字段的值必须填写不能留空

在使用javascript编写验证表单的脚本时，要注意三件事：

1. 验证脚本写的不好，不如不写
2.不要只依赖于javascript。客户端验证不能取代服务器端的验证。即使有了javascript验证，服务器端照样还要对接收到的数据再次验证
3.客户端验证的目的在于帮助用户填好表单，避免它们提交未完成的表单，从而节省他们的时间。服务器段验证的目的在于保护数据库和后台系统的安全

一定哟啊哦尽量保证验证过程尽可能简单。开始的时候，可以只检查用户是否输入什么内容

isFilled,以一个表单元素作为参数

通过检查去掉空格之后的value属性的length属性，就可以知道value中是否没有没有任何字符(不都是空格)。如果确实不包含任何字符，函数返回false

无论什么时候提交表单，都会触发submit事件，而事件会被onsubmit事件处理函数拦截。
4. 提交表单

通过表单能够发送一个ajax请求，而感谢信能以嵌入方式添加到表单所在的页面，体验会更好

12.5.7 压缩代码
改善系能源
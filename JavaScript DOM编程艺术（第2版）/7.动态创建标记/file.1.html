第７　章　动态创建标记


传统技术：document.write ,innerHTML

深入剖析DOM方法：createElement,createTextNode,appendChild,insertBefore


以前见过的绝大多数dom方法只能用来查找元素。getElementById,getElementsByTagName都可以方便地找到文档中
的某个或某些特定元素节点，这些元素随后可以用诸如setAttribute(改变某个属性的值)和nodeValue(改变某个元素节点所包含的文本)
之类的方法和属性来处理

前面的图片库就是这么实现的，showPic函数先找出id属性值是placeholder和descrpiton的两个元素，然后刷新他们的内容
placeholder元素的src属性是用setAttribute修改的，description元素所包含的文本是用nodeValue属性修改的。
这是大多数javascript函数的工作原理。网页的结构由标记负责创建，javascript函数只用来改变某些细节不改变其底层结构。
javascript也可以用来改变网页的结构和内容。
本章通过一些DOM方法，通过创建新元素和修改现有元素来改变网页结构


７．１　　一些传统方法

７．１．１　document.write

document对象的write()方法可以方便快捷地把字符串插入文档里

下面这个函数以一个字符串为参数，它将把一个<p>标签，字符串和一个</p>标签拼接在一起。
拼接后的字符串被保存到变量str，然后用document.write()方法写出来

<!--最好使用外部javascript文件去控制网页的行为。应该避免在<body>部分卵用<script>标签，避免使用document.write方法-->


７．１．２　　innerHTML属性

一旦你使用了innerHTML属性，它的全部内容都将被替换

innerHTML属性要比document.write()方法更值得推荐。使用innerHTML属性。

７．２　DOM方法

DOM不仅可以获取文档的内容，还可以更新文档的内容。在浏览器看了，DOM节点树才是文档。
在DOM看来，一个文档就是一棵节点树，如果你想在节点树上添加内容，就必须插入新的节点。如果你想添加一些标记到文档，就必须
插入元素节点

７．２．１　　createElement方法

两步：
１．创建一个新的元素　　document.createElement(nodeName)  如 document.createElement("p");
这个方法本身并不能影响页面表现，还需要把这个新创建的元素插入到文档中去。为此，你需要有个东西来引用这个新创建出来的节点。
var para = document.createElement("p"); 文档碎片

７．２．２　appendChild方法

把创建的节点插入某个文档的节点数的最简单的办法是，让它称为这个文档某个现有节点的一个子节点

parent.appendChild(child)

var testdiv = document.getElementById("testdiv");

7.2.3  createTextNode方法（创建文本节点）

document.createTextNode(text)

var txt = document.createTextNode("Hello world");

appendChild方法还可以用来连接那些尚未称为文档树一部分的节点。

７．２．４　　一个更复杂的例子

７．３　　重回图片库

７．３．１　在已有元素前插入一个新元素

DOM提供了名为insertBefore()方法，这个方法将把一个新元素插入到一个现有元素的起那么
参数有３个

（１）新元素：你想插入的元素（newElement）
（2）目标元素：你想把这个新元素插入到哪个元素(targetElement) 之前
（３）父元素：目标元素的父元素(parentElement)

parentElement.insertBefore(newElement,targetElement)

7.3.2 在现有元素胡插入一个新元素　insertAfter()方法
１．编写insertAfter函数
function insertAfter(newElement,targeElement) {
    var parent = targeElement.parentNode;
    if (parent.lastChild == targeElement){
        parent.appendChild(newElement);

    }else{
        parent.insertBefore(newElement,targeElement.nextSibling);
    }
}


这个函数使用到了５个DOM方法和属性：

parentNode属性，　lasstChild属性，　　　appendChild方法，　　　　insertBefore方法，　　　　nextSibling属性

２．　使用insertAfter函数

７．３．３　　图片库二次改进版
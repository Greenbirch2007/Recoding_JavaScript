第３章　类型，值和变量

计算机程序的运行需要对值(value)进行操作。在编程语言中，能够表示并操作的值的类型乘坐数据类型(type),
编写语言最基本的特性就是能够支持多种数据类型。
变量是一个值的符号名称，可以通过命长来获得对值的引用。变量的工作机制是编程语言的另一个基本符号名称，可以通过
名称来获得对值的引用。变量的工作机制是编程语言的另一个基本特性


javascript的数据类型分为两类：原始类型(primitive type)和对象类型(object type)

javascript中的原始类型包括数字，字符串和布尔值
javascript有两个特殊的原始值:null(空)　　,underfined（未定义），它们不是数字，字符串和布尔值，它们通常
分别代表了各自特殊类型的唯一的成员

除此之外，就是对象了。对象(object)是属性(property)的集合，每个属性都由"名/值对"(值可以是原始值，比如数字，字符串，也可以是对象)构成
其中一个比较特殊的对象————全局对象(global object)


普通的javascript对象是"命名值"的无序集合。javascript同样定义了一种特殊对象————数组(array),表示带编号的值的有序集合
javascript为数组定义了专门的语法，使数组拥有一些和普通对象不同的特有行为特性

javascript还定义了另一种特殊对象————函数。函数是具有与它相关联的可执行ｄｉａｍ的对象，通过调用函数来运行可执行的代码，并返回运算结果。
对函数而言，它们都是真值，并且javascript可以将它们当做普通对象来对待。


如果函数用来初始化（使用new运算符）一个新建的对象，我们称之为构造函数(constructor)。每个构造函数定义一类(class)对象————由构造函数
初始化的对象组成的集合。类可以看做是对象类型的子类型。除了数组(Array)类和函数(Function)类型之外，
javascript语言核心定义了其他三种有用的类　１．日期(Date) 2. 正则(RegExp)  3. 错误(Error)

1.日期类定义代表日期的对象
２．正则类定义了表示正则表达式(一种强大的模式匹配工具)
３．错误类定义了那些表示javascript程序中运行时错误和语法错误的对象。可以通过定义自己的构造函数来定义需要的类


javascript解释器有自己的内存管理机制，可以自动对内存进行垃圾回收(garbage collection).这意味这程序可以按需创建对象，程序员则不必担心这些对象的
销毁和内存回收。当不再有任何引用指向一个对象，解释器就会知道这个对象没用了，然后自动回收
它所占的内存资源
javascript是一种面向对象的语言。这意味着我们不用全局的定义函数取操作不同类型的值，数据类型本身可以定义方法(method)来使用值。
从技术上讲，只有javascript对象才能拥有方法。然而，数字，字符串，布尔值也可以拥有自己的方法
在javascript中，只有null和undefined是无法拥有方法的值

javascript的类型可以分为原始类型和对象类型，也可以分为拥有方法的类型和不能拥有方法的类型，同样可以分为可变(mutable)类型和不可变(immutable)类型
可变类型的值是可修改的。对象和数组属于可变类型：javascript程序可以更改对象属性值和数组元素的值。
数字，布尔值，null,undefined是不可变类型


javascript可以自由地进行数据类型转换　　“==”

javascrpit 变量是无类型的(untyped),变量可以被赋予任何类型的值，同样一个变量也可以重新赋予不同类型的值。使用
var 关键字来声明(declare)变量。javascript采用词法作用域(lexical scoping)。不在任何函数内声明的变量
称为全局变量(global variable),它在javascript程序中的任何地方都可见。
在函数内声明的变量具有函数作用域(function scope)，并且只有在函数内可见

３．１　数字
３．１．５　日期和时间

javascript语言核心包括Date()构造函数，用来创建表示日期和时间的对象。这些日期的对象的方法为日期计算提供了简单的
api.日期对象不想数字那样是基本的数据类型

３．２　文本

字符串(string)是一组由16位值组成的不可变的有序序列，每个字符通常来自于Unicode字符集。javascript通过字符串类型来表示文本。
字符串的长度(length)是其所含16位值的根数

字符集，内码和javascript字符串

3.21 字符串直接量

在javascript程序中的字符串直接量，是由单引号或双引号括起来的字符序列。
3.2.2  转义字符

\t,\n


3.2.3 字符串的使用


javascript的内置功能之一就是字符串连接。如果将加号(+) 运算符用于数字表示两数想家，但如果用于字符串连接

字符串的长度方法 s.length()  除了length属性，字符串还提供许多可以调用的方法
注意，在javascript中字符串是固定不变的，类似replace()和toUpperCase()的方法都返回新字符串，原字符串本身并没有发生改变


在ECMAScript 5中，字符串可以当做只读数组，除了使用charAt(),方法，也可以使用方括号来访问字符串中的单个字符(16位值)

3.2.4 模式匹配

javascript定义了RegExp()构造函数，用来创建表示文本匹配模式的对象。javascript采用Perl中的正则表达式语法。String和RegExp对象均定义了利用正则表达式
进行模式匹配和查找与替换的函数。

RegExp并不是javascript的基本了您修改。但是它们也有直接量写法，可以直接在javascript程序中使用。在两条斜线之间的文本构成了一个正则表达式直接量。
第二条斜线之后也可以跟随一个或多个字母，用来修饰匹配模式的含义


RegExp对象定义了很多有用的方法，字符串同样具有可以接收RegExp参数的方法

3.3  布尔值


布尔值包含toString()方法，因此使用这个方法将字符串转换为"true"或"false",但它并不包含其他有用的方法

&&  逻辑与         ||  逻辑或        ！  逻辑非


3.4  null  和 undefined

null是一个特殊的对象值

3.5  全局对象

全局对象(global object)在javascript中有着重要用途：全局对象的属性是全局定义的符号，javascript程序可以直接使用。当javascript解释器
启动时(或任何web浏览器加载新页面的时候)，它将创建一个新的全局对象，并给它一组定义的初始属性


1.全局属性，比如  undefined,Infinity和  NaN
2.全局函数，比如  isNaN, parseInt(),eval()
3.构造函数 ， 比如  Date(),RegExp(),String(),Object(),Array()
4. 全局对象，比如 Math,JSON

全局对象的初始属性并不是保留字，但它们应该当做保留字对待，或通过"Global"来找到这些全局对象。对于客户端javascript来讲，window对象定义了一些额外的全局属性

在代码中的最顶级————不再任何函数内的javascript代码————可以使用javascript关键字this 来引用全局对象

var global = this; // 定义一个引用全局对象的全局变量


在客户端javascript中，在其表示的浏览器窗口中的所有javascript代码中，window地下充当了全局对象。这个全局window对象偶一个属性window引用其自身，它可以
代替this来引用全局对象。window对象定义了核心全局属性，但它也针对web浏览器和客户端javascript定义了一少部分其他全局属性

当初次创建的时候，全局对象定义了javascript中所有的预定义全局值。这个特殊对象同样包含了为程序定义的全局值。如果代码声明了一个全局变量，这个全局
变量就是全局对象的一个属性

3.6 包装对象

javascript对象是一种复合值：它是属性或已命名值的集合。通过“.”符号来引用属性值。当属性值是一个函数的时候，称为方法。通过O.m()来调用对象o中的方法

但是字符串不是对象，但是也有属性。只要引用了字符串s的属性，javascript就会将字符串值通过调用  new String(s) 方式转换成对象，这个对象继承了字符串
的方法，并被用来处理属性的引用。一旦属性引用结束，这个新创建的对象就会销毁。
同字符串一样，数字和布尔值也具有各自的方法。通过Number()和Boolean()构造函数创建一个临时对象，这些方法的调用均是来自于这个临时对象。
null 和 undefined没有包装对象：访问它们的属性会造成一个类型错误

存取字符串，数字或布尔值的属性时创建的临时对象称作包装对象，它只是偶尔用来区分字符串和字符串对象，数字和数值对象以及布尔值和布尔对象。
通常包装对象只是被看做一种实现细节，而不用特别注意。由于字符串，数字和布尔值的属性都是只读的，并且不能给他们定义新属性

可通过String(),Number(),Boolean()构造函数来显式创建包装对象

3.7  不可变的原始值和可变的对象引用

对象和原始值不同，首先，它们是可变的————它们的值是可修改的。对象的比较并非值的比较：即使两个对象包含同样的属性及相同的值，它们也是不相等的。
各个索引元素完全相等的两个数组也不相等。我们通常将对象称为引用类型(reference type),对象值都是引用(reference),对象的比较均是引用的比较：
当且仅当它们引用同一个基对象，它们才相等


将对象(或数组)赋值给一个变量，仅仅是赋值的引用值：对象本身并没有复制一次。如果你想得到一个对象或数组的副本，则必须显式复制对象的每个属性或数组的
每个元素。可以通过循环来完成数组的复制。

如果我们想比较两个单独的对象或数组，则必须比较它们的属性或元素。

3.8 类型转换


原始值 ——————————>  对象


原始值到对象的转换很简单，原始值通过调用String(),Number(),Boolean()构造函数，转换为它们各自的包装对象

null和undefined属于例外，当将它们用在期望是一个对象的地方都会造成一个类型错误(TypeError)异常，而不会执行正常的转换

对象——————————>原始值


3.8.1 转换和相等性


3.8.2 显式类型转换

String(),Number(),Boolean()

javascript提供了专门的函数和方法用来以下的转换：

数字——————————>字符串
字符串——————————>数字

Number类为这种数字到字符串的类型转换场景定义了三个方法
1.toFixed()根据小数点后的指定点位数将数字转换为字符串，它从不使用指数记数法
2. toExponential()使用指数记数发将数字转换为是指数形式的字符串
3.toPrecision()根据指定的有效数字位数将数字转换成字符串

parseInt()只解析整数
parseFloat()则可以解析整数和浮点数
3.8.3  对象转换为原始值

对象————————>布尔值，所有的对象(包括数组和函数)都转换为true.对于包装对象也是如此：new Boolean(false)是一个对象而不是原始值，它将转换为true

对象——————>字符串   ，  对象————————>数字的转换是通过调用待转换对象的一个方法来完成的。这个规则只适用于本地对象(native object).宿主对象(例如，由web浏览器定义的
对象)根据各自的算法可以转换成字符串和数字

所有的对象继承了两个转换方法：
1.toString(),它的作用是返回一个反映这个对象的字符串。默认的toString()方法并不会返回一个有趣的值？
2.另一个转换对象的函数是valueOf().如果存在任意原始值，它就默认将对象转换为表示它的原始值。对象是复合值，而且大多数对象无法
真正表示为一个原始值，因此默认的valueOf()简单地返回对象本身，而不是返回一个原始值。


javascript将   对象——————>字符串   的步骤：

1.如果对象具有toString()方法，就调用此方法
2.如果没有toString()方法，或这个方法不能返回一个原始值，就调用valueOf()方法。


javascript将   对象——————>数字   的步骤：

1.如果对象具有valueOf()方法，就调用此方法
2.如果没有valueOf()方法，或这个方法不能返回一个原始值，就调用valueOf()方法。

3.9 变量声明

在javascript程序中，使用一个变量之前应当先声明。变量是使用关键字var来声明的

重要的声明和遗漏的声明

3.10  变量作用域
优先级 ：  局部变量  >  全局变量
函数参数也是局部变量，它们只在函数体内有定义

在函数体内，局部变量的优先级高于同名的全局变量，如果在函数内声明的一个局部变量或函数参数中带有的变量和全局变量重名，那么全局变量就被局部变量所遮盖

尽管在全局作用域编写代码时可以不写var语句，但声明局部变量时则必须使用var语句
函数定义是可以嵌套的。由于每个函数都有它自己的作用域，因此会出现几个局部作用域嵌套的情况

3.10.1 函数作用域和声明提前

javascript中没有块级作用域。javascript取而代之地使用了函数作用域(function scope):变量在声明它们的函数体以及这个函数体嵌套的任意函数体内都是有意义的

声明提前

3.10.2 作为属性的变量

当声明一个javascript全局变量时，实际上是定义了全局对象的一个属性。当使用var 声明一个变量时，创建的这个属性是不可配置的，所以不可以被delete删除

一个未声明的变量赋值的话，javascript会自动创建一个全局变量。以这种方式创建的变量是全局对象的正常的可配值属性，并可以删除它们

javascript可以允许使用this 关键字来引用全局对象，

3.10.3 作用域链

作用域链有一个全局对象组成。对理解闭包有帮助的。
